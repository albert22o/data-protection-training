# Пошаговое решение (от начала до конца) для примера

Нужно решить

$$
2^x \equiv 9 \pmod{11}.
$$

Я пройдусь **каждым шагом** алгоритма Baby-step Giant-step, покажу все вычисления и в конце проверю ответ.

---

## Шаг 0 — предварительные проверки

* $p=11$ — простое, порядок группы $\mathbb{Z}_{11}^*$ равен $p-1=10$.
* $\gcd(a,p)=\gcd(2,11)=1$ — ок, решение может существовать в мультипликативной группе.

(Замечание: иногда берут $m=\lceil\sqrt{p-1}\rceil$, но в коде выше берут $m=\lceil\sqrt{p}\rceil$. Для нашего примера оба дают $m=4$.)

---

## Шаг 1 — выбираем $m$

$$
m = \lceil\sqrt{p}\rceil = \lceil\sqrt{11}\rceil = 4.
$$

---

## Шаг 2 — строим **baby steps** (таблицу значений $y\cdot a^j \bmod p$ для $j=0..m-1$)

Вычисляем по порядку:

* $j=0:\; a^0 = 1$.
  $y\cdot a^0 = 9\cdot1 = 9$.
  $9 \bmod 11 = 9$.
  Сохраняем: `baby_steps[9] = 0`.

* $j=1:\; a^1 = 2$.
  $9\cdot2 = 18$.
  $18 \bmod 11 = 18 - 11 = 7$.
  Сохраняем: `baby_steps[7] = 1`.

* $j=2:\; a^2 = 4$.
  $9\cdot4 = 36$.
  $36 \bmod 11 = 36 - 33 = 3$.
  Сохраняем: `baby_steps[3] = 2`.

* $j=3:\; a^3 = 8$.
  $9\cdot8 = 72$.
  $72 \bmod 11 = 72 - 66 = 6$.
  Сохраняем: `baby_steps[6] = 3`.

Таблица (значение $\mapsto j$):

```
9 -> 0
7 -> 1
3 -> 2
6 -> 3
```

---

## Шаг 3 — вычисляем множитель для шагов великана

$$
a^m \bmod p = 2^4 \bmod 11 = 16 \bmod 11 = 5.
$$

Обозначим $a_m = 5$.

---

## Шаг 4 — перебираем **giant steps**: $(a^m)^i \bmod p$, $i = 0..m$

Инициализируем `gamma = 1` (это $(a^m)^0$) и в каждой итерации умножаем на $a_m$ по модулю $p$.

Вычисления:

* $i=0:$
  $\gamma = 1$.
  Проверяем: есть ли `1` в `baby_steps`? — **нет**.

  Обновляем $\gamma \leftarrow \gamma\cdot a_m \bmod 11 = 1\cdot5 = 5$.

* $i=1:$
  $\gamma = 5$.
  Есть ли `5` в `baby_steps`? — **нет**.

  Обновляем $\gamma \leftarrow 5\cdot5 = 25 \bmod 11 = 25 - 22 = 3$.

* $i=2:$
  $\gamma = 3$.
  Есть ли `3` в `baby_steps`? — **да**, `baby_steps[3] = 2` (то есть $j=2$).

  Теперь восстанавливаем $x$:

  $$
  x = i\cdot m - j = 2\cdot 4 - 2 = 8 - 2 = 6.
  $$

  $x\ge0$, возвращаем $x \bmod (p-1)$: $6 \bmod 10 = 6$.
  Алгоритм нашёл решение $x = 6$ — на этом можно остановиться.

(Для полноты: если продолжить, то

* $i=3$: $\gamma=3\cdot5=15\bmod11=4$ — нет;
* $i=4$: $\gamma=4\cdot5=20\bmod11=9$ — совпадение с `baby_steps[9]=0`, даст $x=4\cdot4-0=16$, и $16 \bmod 10 = 6$ — тот же класс по модулю порядка.)

---

## Шаг 5 — проверка найденного ответа

Проверим: $2^6 = 64$.
$64 \bmod 11 = 64 - 5\cdot11 = 64 - 55 = 9$.
Получили $9$ — совпадает с $y$. Значит $x=6$ — правильное решение.

---

## Дополнительная проверка (наивный перебор) — для сравнения

Переберём $2^x \bmod 11$ для $x=0..10$:

* $2^0 \equiv 1$
* $2^1 \equiv 2$
* $2^2 \equiv 4$
* $2^3 \equiv 8$
* $2^4 \equiv 5$
* $2^5 \equiv 10$
* $2^6 \equiv 9$ ← здесь
  (далее период 10: $2^{10}\equiv1$).
  Наивный поиск тоже дал $x=6$, но для больших модулей наивный способ слишком медленный.

---

## Итог

* Решение уравнения $2^x \equiv 9 \pmod{11}$: **$x = 6$** (наименьший неотрицательный ответ).
* Любой другой ответ будет эквивалентен $6$ по модулю порядка группы $p-1=10$ (например, $x=16$ даёт ту же остачу).

---

## Короткие практические замечания

* В коде `baby_steps` обычно хранит **первое** (минимальное) $j$ для данного значения; это даёт минимальный $x$ из найденных.
* Можно взять $m=\lceil\sqrt{\text{ord}(a)}\rceil$ (если известен порядок $a$), тогда таблица будет чуть меньше.
* Алгоритм требует памяти $O(m)$ и времени $O(m)$, где $m\approx\sqrt{p}$ — значительно лучше $O(p)$.

---
